<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ach: src/ach.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>src/ach.c File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;sys/mman.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;ctype.h&gt;</code><br/>
<code>#include &lt;stdbool.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>
<code>#include &lt;inttypes.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="ach_8h_source.html">ach.h</a>&quot;</code><br/>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afc21b50cbf64f3ee3ebd34327232e21a"></a><!-- doxytag: member="ach.c::DEBUGF" ref="afc21b50cbf64f3ee3ebd34327232e21a" args="(fmt, a...)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#afc21b50cbf64f3ee3ebd34327232e21a">DEBUGF</a>(fmt, a...)&nbsp;&nbsp;&nbsp;fprintf(stderr, (fmt), ## a )</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">macro to print debug messages <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a37f8ce0601b6fe9eed7367efc5237dee"></a><!-- doxytag: member="ach.c::DEBUG_PERROR" ref="a37f8ce0601b6fe9eed7367efc5237dee" args="(a)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a37f8ce0601b6fe9eed7367efc5237dee">DEBUG_PERROR</a>(a)&nbsp;&nbsp;&nbsp;perror(a)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call perror() when debugging. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abcf0d5a50dd7e407cd464c1afbd27554"></a><!-- doxytag: member="ach.c::IFDEBUG" ref="abcf0d5a50dd7e407cd464c1afbd27554" args="(x)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#abcf0d5a50dd7e407cd464c1afbd27554">IFDEBUG</a>(x)&nbsp;&nbsp;&nbsp;(x)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">macro to do things when debugging <br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a11e481d90a14ba4485d3bb15a8bb77c3"></a><!-- doxytag: member="ach.c::ach_result_to_string" ref="a11e481d90a14ba4485d3bb15a8bb77c3" args="(ach_status_t result)" -->
const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a11e481d90a14ba4485d3bb15a8bb77c3">ach_result_to_string</a> (<a class="el" href="ach_8h.html#a37a6ca5cbf68c6e7f8f4abd5ce783ddc">ach_status_t</a> result)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Converts return code from ach call to a human readable string;. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a1fa91ef1ccb0e3521a8b1d6ecfd2a66c">ach_create_attr_init</a> (<a class="el" href="structach__create__attr__t.html">ach_create_attr_t</a> *attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize attributes for creating channels.  <a href="#a1fa91ef1ccb0e3521a8b1d6ecfd2a66c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#afd2a92b13a96dc80bb4ce70b68c36e82">ach_create</a> (const char *channel_name, size_t frame_cnt, size_t frame_size, <a class="el" href="structach__create__attr__t.html">ach_create_attr_t</a> *attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new channel.  <a href="#afd2a92b13a96dc80bb4ce70b68c36e82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa61413f11032605e3dc46d0fb9a52c9"></a><!-- doxytag: member="ach.c::ach_open" ref="aaa61413f11032605e3dc46d0fb9a52c9" args="(ach_channel_t *chan, const char *channel_name, ach_attr_t *attr)" -->
enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#aaa61413f11032605e3dc46d0fb9a52c9">ach_open</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, const char *channel_name, <a class="el" href="structach__attr__t.html">ach_attr_t</a> *attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens a handle to channel. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#aee074eb5c6f1bb0256194b43f7164386">ach_get</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, void *buf, size_t size, size_t *frame_size, const struct timespec *ACH_RESTRICT abstime, int options)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pulls a message from the channel.  <a href="#aee074eb5c6f1bb0256194b43f7164386"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a96e4b2904ea4f22569a0670959999305">ach_get_next</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, void *buf, size_t size, size_t *frame_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pulls the next message from a channel following the most recent message this subscriber has read.  <a href="#a96e4b2904ea4f22569a0670959999305"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a557a980b1c80ead8aa64a33407474748">ach_get_last</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, void *buf, size_t size, size_t *frame_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pulls the most recent message from the channel.  <a href="#a557a980b1c80ead8aa64a33407474748"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3cf82640e88ed60dd45a3accad92a9a5"></a><!-- doxytag: member="ach.c::ach_copy_last" ref="a3cf82640e88ed60dd45a3accad92a9a5" args="(ach_channel_t *chan, void *buf, size_t size, size_t *frame_size)" -->
enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a3cf82640e88ed60dd45a3accad92a9a5">ach_copy_last</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, void *buf, size_t size, size_t *frame_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">always copies the last message, even if it is stale <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a5d80d816258fbc0002fb5efb16577bf5">ach_wait_last</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, void *buf, size_t size, size_t *frame_size, const struct timespec *ACH_RESTRICT abstime)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Blocks until a new message is available.  <a href="#a5d80d816258fbc0002fb5efb16577bf5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9155e0ffd0f27aeafea53f9d0e7c277a"></a><!-- doxytag: member="ach.c::ach_wait_next" ref="a9155e0ffd0f27aeafea53f9d0e7c277a" args="(ach_channel_t *chan, void *buf, size_t size, size_t *frame_size, const struct timespec *ACH_RESTRICT abstime)" -->
enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a9155e0ffd0f27aeafea53f9d0e7c277a">ach_wait_next</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, void *buf, size_t size, size_t *frame_size, const struct timespec *ACH_RESTRICT abstime)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">like ach_get_next but blocks if no new data is there <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#af51fdf3b5edf39ce54f62ac0f031dd2b">ach_flush</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Discards all previously received messages for this handle.  <a href="#af51fdf3b5edf39ce54f62ac0f031dd2b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#acb8fcfaba91a22e295a5e437cd5b9c9b">ach_put</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, void *buf, size_t len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Writes a new message in the channel.  <a href="#acb8fcfaba91a22e295a5e437cd5b9c9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a397913b30e59cd6c1ab0b9cf8c5b331c">ach_close</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Closes the shared memory block.  <a href="#a397913b30e59cd6c1ab0b9cf8c5b331c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#adccdafda2936a9f70087f950ba7e83e8">ach_dump</a> (<a class="el" href="structach__header__t.html">ach_header_t</a> *shm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prints information about the channel shm to stderr.  <a href="#adccdafda2936a9f70087f950ba7e83e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a860d84dfee4d1306fe58df7b073c440a">ach_attr_init</a> (<a class="el" href="structach__attr__t.html">ach_attr_t</a> *attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize attributes for opening channels.  <a href="#a860d84dfee4d1306fe58df7b073c440a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab81866aaeb3995e12e12de27457e1635"></a><!-- doxytag: member="ach.c::ach_chmod" ref="ab81866aaeb3995e12e12de27457e1635" args="(ach_channel_t *chan, mode_t mode)" -->
enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#ab81866aaeb3995e12e12de27457e1635">ach_chmod</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, mode_t mode)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets permissions of chan to specified mode. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3ca9384476568e624155fd7f17aa16f6"></a><!-- doxytag: member="ach.c::ach_unlink" ref="a3ca9384476568e624155fd7f17aa16f6" args="(const char *name)" -->
enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a3ca9384476568e624155fd7f17aa16f6">ach_unlink</a> (const char *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete an ach channel. <br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab49bf40d8d514cd9c90044b570b6dbca"></a><!-- doxytag: member="ach.c::ach_channel_size" ref="ab49bf40d8d514cd9c90044b570b6dbca" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#ab49bf40d8d514cd9c90044b570b6dbca">ach_channel_size</a> = sizeof(<a class="el" href="structach__channel__t.html">ach_channel_t</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of <a class="el" href="structach__channel__t.html" title="Descriptor for shared memory area.">ach_channel_t</a>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7bdba00f25de2f8ac2887056d0a34154"></a><!-- doxytag: member="ach.c::ach_attr_size" ref="a7bdba00f25de2f8ac2887056d0a34154" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8c.html#a7bdba00f25de2f8ac2887056d0a34154">ach_attr_size</a> = sizeof(<a class="el" href="structach__attr__t.html">ach_attr_t</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of <a class="el" href="structach__attr__t.html" title="Attributes to pass to ach_open.">ach_attr_t</a>. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="author"><dt><b>Author:</b></dt><dd>Neil T. Dantam </dd></dl>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a860d84dfee4d1306fe58df7b073c440a"></a><!-- doxytag: member="ach.c::ach_attr_init" ref="a860d84dfee4d1306fe58df7b073c440a" args="(ach_attr_t *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ach_attr_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__attr__t.html">ach_attr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize attributes for opening channels. </p>

</div>
</div>
<a class="anchor" id="a397913b30e59cd6c1ab0b9cf8c5b331c"></a><!-- doxytag: member="ach.c::ach_close" ref="a397913b30e59cd6c1ab0b9cf8c5b331c" args="(ach_channel_t *chan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__channel__t.html">ach_channel_t</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Closes the shared memory block. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>chan is an initialized ach channel with open shared memory area</dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>the shared memory file for chan is closed </dd></dl>

</div>
</div>
<a class="anchor" id="afd2a92b13a96dc80bb4ce70b68c36e82"></a><!-- doxytag: member="ach.c::ach_create" ref="afd2a92b13a96dc80bb4ce70b68c36e82" args="(const char *channel_name, size_t frame_cnt, size_t frame_size, ach_create_attr_t *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_create </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>frame_cnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>frame_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structach__create__attr__t.html">ach_create_attr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new channel. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>channel_name</em>&nbsp;</td><td>Name of the channel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>frame_cnt</em>&nbsp;</td><td>number of frames to hold in circular buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>frame_size</em>&nbsp;</td><td>nominal size of each frame </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>attr</em>&nbsp;</td><td>options </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1fa91ef1ccb0e3521a8b1d6ecfd2a66c"></a><!-- doxytag: member="ach.c::ach_create_attr_init" ref="a1fa91ef1ccb0e3521a8b1d6ecfd2a66c" args="(ach_create_attr_t *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ach_create_attr_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__create__attr__t.html">ach_create_attr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize attributes for creating channels. </p>

</div>
</div>
<a class="anchor" id="adccdafda2936a9f70087f950ba7e83e8"></a><!-- doxytag: member="ach.c::ach_dump" ref="adccdafda2936a9f70087f950ba7e83e8" args="(ach_header_t *shm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ach_dump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__header__t.html">ach_header_t</a> *&nbsp;</td>
          <td class="paramname"> <em>shm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints information about the channel shm to stderr. </p>
<p>This function is mostly for internal debugging. </p>

</div>
</div>
<a class="anchor" id="af51fdf3b5edf39ce54f62ac0f031dd2b"></a><!-- doxytag: member="ach.c::ach_flush" ref="af51fdf3b5edf39ce54f62ac0f031dd2b" args="(ach_channel_t *chan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__channel__t.html">ach_channel_t</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Discards all previously received messages for this handle. </p>
<p>Does not change the actual channel, just resets the sequence number in the handle. </p>

</div>
</div>
<a class="anchor" id="aee074eb5c6f1bb0256194b43f7164386"></a><!-- doxytag: member="ach.c::ach_get" ref="aee074eb5c6f1bb0256194b43f7164386" args="(ach_channel_t *chan, void *buf, size_t size, size_t *frame_size, const struct timespec *ACH_RESTRICT abstime, int options)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__channel__t.html">ach_channel_t</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>frame_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timespec *ACH_RESTRICT&nbsp;</td>
          <td class="paramname"> <em>abstime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>options</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pulls a message from the channel. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>chan has been opened with <a class="el" href="ach_8h.html#aaa61413f11032605e3dc46d0fb9a52c9" title="Opens a handle to channel.">ach_open()</a></dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>If buf is big enough to hold the next frame, buf contains the data for the last frame and chan.seq_num is set to the last frame. If buf is too small to hold the next frame, no side effects occur. The seq_num field of chan will be set to the latest sequence number (that of the gotten frame). </dd></dl>

</div>
</div>
<a class="anchor" id="a557a980b1c80ead8aa64a33407474748"></a><!-- doxytag: member="ach.c::ach_get_last" ref="a557a980b1c80ead8aa64a33407474748" args="(ach_channel_t *chan, void *buf, size_t size, size_t *frame_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_get_last </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__channel__t.html">ach_channel_t</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>frame_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pulls the most recent message from the channel. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>chan has been opened with <a class="el" href="ach_8h.html#aaa61413f11032605e3dc46d0fb9a52c9" title="Opens a handle to channel.">ach_open()</a></dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>If buf is big enough to hold the next frame, buf contains the data for the last frame and chan.seq_num is set to the last frame. If buf is too small to hold the next frame, no side effects occur. The seq_num field of chan will be set to the latest sequence number (that of the gotten frame).</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>the channel to read from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>(output) The buffer to write data to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>the maximum number of bytes that may be written to buf </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>frame_size</em>&nbsp;</td><td>(output) The size of the frame. This will be the number of bytes that were written on ACH_SUCCESS or the necessary size of the buffer on ACH_OVERFLOW.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>ACH_OK on success. ACH_OVERFLOW if buffer is too small to hold the frame. ACH_STALE_FRAMES if a new frame is not yet available. </dd></dl>

</div>
</div>
<a class="anchor" id="a96e4b2904ea4f22569a0670959999305"></a><!-- doxytag: member="ach.c::ach_get_next" ref="a96e4b2904ea4f22569a0670959999305" args="(ach_channel_t *chan, void *buf, size_t size, size_t *frame_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_get_next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__channel__t.html">ach_channel_t</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>frame_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pulls the next message from a channel following the most recent message this subscriber has read. </p>
<p>see ach_get_last for parameter descriptions</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>chan has been opened with ach_subscribe() </dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>buf contains the data for the next frame and chan.seq_num is incremented </dd></dl>

</div>
</div>
<a class="anchor" id="acb8fcfaba91a22e295a5e437cd5b9c9b"></a><!-- doxytag: member="ach.c::ach_put" ref="acb8fcfaba91a22e295a5e437cd5b9c9b" args="(ach_channel_t *chan, void *buf, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__channel__t.html">ach_channel_t</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes a new message in the channel. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>chan has been opened with <a class="el" href="ach_8h.html#aaa61413f11032605e3dc46d0fb9a52c9" title="Opens a handle to channel.">ach_open()</a></dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>The contents of buf are copied into the channel and the sequence number of the channel is incremented.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>(action) The channel to write to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>The buffer containing the data to copy into the channel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>number of bytes in buf to copy, len &gt; 0 </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>ACH_OK on success. </dd></dl>

</div>
</div>
<a class="anchor" id="a5d80d816258fbc0002fb5efb16577bf5"></a><!-- doxytag: member="ach.c::ach_wait_last" ref="a5d80d816258fbc0002fb5efb16577bf5" args="(ach_channel_t *chan, void *buf, size_t size, size_t *frame_size, const struct timespec *ACH_RESTRICT abstime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_wait_last </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__channel__t.html">ach_channel_t</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>frame_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timespec *ACH_RESTRICT&nbsp;</td>
          <td class="paramname"> <em>abstime</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Blocks until a new message is available. </p>
<p>If the latest message is new than the most recently read message, copy that message into buf. Otherwise, sleep until a new message is available.</p>
<p>See ach_get_next for parameters </p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Sep 18 2012 04:07:39 for ach by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
