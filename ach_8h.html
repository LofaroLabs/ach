<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ach: include/ach.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>include/ach.h File Reference</h1>  </div>
</div>
<div class="contents">

<p><a href="ach_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structach__header__t.html">ach_header_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Header for shared memory area.  <a href="structach__header__t.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structach__index__t.html">ach_index_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Entry in shared memory index array.  <a href="structach__index__t.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structach__attr__t.html">ach_attr_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attributes to pass to ach_open.  <a href="structach__attr__t.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structach__create__attr__t.html">ach_create_attr_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attributes to pass to ach_create.  <a href="structach__create__attr__t.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structach__channel__t.html">ach_channel_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Descriptor for shared memory area.  <a href="structach__channel__t.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structach__pipe__frame__t.html">ach_pipe_frame_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Format for ach frames sent over pipes or stored on disk.  <a href="structach__pipe__frame__t.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a36320691b8bddb17d7416a7c57e296f5"></a><!-- doxytag: member="ach.h::ACH_RESTRICT" ref="a36320691b8bddb17d7416a7c57e296f5" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a36320691b8bddb17d7416a7c57e296f5">ACH_RESTRICT</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Alias restrict keyword. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8e5f044e5399e970841e35f1f059b697"></a><!-- doxytag: member="ach.h::ACH_DEPRECATED" ref="a8e5f044e5399e970841e35f1f059b697" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a8e5f044e5399e970841e35f1f059b697">ACH_DEPRECATED</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deprecated old symbol. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb5d1fae5fa66a03d7d8d4761011e86c"></a><!-- doxytag: member="ach.h::ACH_CHAN_NAME_MAX" ref="abb5d1fae5fa66a03d7d8d4761011e86c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#abb5d1fae5fa66a03d7d8d4761011e86c">ACH_CHAN_NAME_MAX</a>&nbsp;&nbsp;&nbsp;64ul</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">maximum size of a channel name <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd256125e8e540929dd1b945e4a9c791"></a><!-- doxytag: member="ach.h::ACH_CHAN_NAME_PREFIX" ref="afd256125e8e540929dd1b945e4a9c791" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#afd256125e8e540929dd1b945e4a9c791">ACH_CHAN_NAME_PREFIX</a>&nbsp;&nbsp;&nbsp;&quot;/achshm-&quot;</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">prefix to apply to channel names to get the shared memory file name <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a01aa865155a30c16a6a5c5643d0f6cfe"></a><!-- doxytag: member="ach.h::ACH_INTR_RETRY" ref="a01aa865155a30c16a6a5c5643d0f6cfe" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a01aa865155a30c16a6a5c5643d0f6cfe">ACH_INTR_RETRY</a>&nbsp;&nbsp;&nbsp;8</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of times to retry a syscall on EINTR before giving up. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a6ee6cd8dede61e5c4413a70317f63731">ACH_SHM_MAGIC_NUM</a>&nbsp;&nbsp;&nbsp;0xb07511f3</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">magic number that appears the the beginning of our mmaped files.  <a href="#a6ee6cd8dede61e5c4413a70317f63731"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a4c1ae385acbd87b06971e19753462423">ACH_SHM_GUARD_HEADER_NUM</a>&nbsp;&nbsp;&nbsp;((uint64_t)0x1A2A3A4A5A6A7A8ALLU)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A separator between different shm sections.  <a href="#a4c1ae385acbd87b06971e19753462423"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a9756b6b93b39fbed2645e463dfc7d327">ACH_SHM_GUARD_INDEX_NUM</a>&nbsp;&nbsp;&nbsp;((uint64_t)0x1B2B3B4B5B6B7B8BLLU)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A separator between different shm sections.  <a href="#a9756b6b93b39fbed2645e463dfc7d327"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#ae81e27183c5ad6111cf19685f942ab7e">ACH_SHM_GUARD_DATA_NUM</a>&nbsp;&nbsp;&nbsp;((uint64_t)0x1C2C3C4C5C6C7C8CLLU)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A separator between different shm sections.  <a href="#ae81e27183c5ad6111cf19685f942ab7e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8448a67475a582f8515335a3e88c8856"></a><!-- doxytag: member="ach.h::ACH_SHM_GUARD_HEADER" ref="a8448a67475a582f8515335a3e88c8856" args="(shm)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a8448a67475a582f8515335a3e88c8856">ACH_SHM_GUARD_HEADER</a>(shm)&nbsp;&nbsp;&nbsp;((uint64_t*)((<a class="el" href="structach__header__t.html">ach_header_t</a>*)(shm) + 1))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets pointer to guard uint64 following the header. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a58bc54a5ccd573e5d6185696c5b93f"></a><!-- doxytag: member="ach.h::ACH_SHM_INDEX" ref="a1a58bc54a5ccd573e5d6185696c5b93f" args="(shm)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a1a58bc54a5ccd573e5d6185696c5b93f">ACH_SHM_INDEX</a>(shm)&nbsp;&nbsp;&nbsp;((<a class="el" href="structach__index__t.html">ach_index_t</a>*)(ACH_SHM_GUARD_HEADER(shm) + 1))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the pointer to the index array in the shm block. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8daa921151d1ad687da018f8caf072d2"></a><!-- doxytag: member="ach.h::ACH_SHM_GUARD_INDEX" ref="a8daa921151d1ad687da018f8caf072d2" args="(shm)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a8daa921151d1ad687da018f8caf072d2">ACH_SHM_GUARD_INDEX</a>(shm)&nbsp;&nbsp;&nbsp;((uint64_t*)(ACH_SHM_INDEX(shm) + ((<a class="el" href="structach__header__t.html">ach_header_t</a>*)(shm))-&gt;index_cnt))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">gets pointer to the guard following the index section <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af61e34af50bd47ecc2ef3f5bdc77e545"></a><!-- doxytag: member="ach.h::ACH_SHM_DATA" ref="af61e34af50bd47ecc2ef3f5bdc77e545" args="(shm)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#af61e34af50bd47ecc2ef3f5bdc77e545">ACH_SHM_DATA</a>(shm)&nbsp;&nbsp;&nbsp;( (uint8_t*)(ACH_SHM_GUARD_INDEX(shm) + 1) )</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the pointer to the data buffer in the shm block. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af20a50fe51b61358d83442841d2182ea"></a><!-- doxytag: member="ach.h::ACH_SHM_GUARD_DATA" ref="af20a50fe51b61358d83442841d2182ea" args="(shm)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#af20a50fe51b61358d83442841d2182ea">ACH_SHM_GUARD_DATA</a>(shm)&nbsp;&nbsp;&nbsp;((uint64_t*)(ACH_SHM_DATA(shm) + ((<a class="el" href="structach__header__t.html">ach_header_t</a>*)(shm))-&gt;data_size))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the pointer to the guard following data buffer in the shm block. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d73b74eebe49d7d7ce537f851a89624"></a><!-- doxytag: member="ach.h::ACH_DEFAULT_FRAME_COUNT" ref="a2d73b74eebe49d7d7ce537f851a89624" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ACH_DEFAULT_FRAME_COUNT</b>&nbsp;&nbsp;&nbsp;16</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad10d62183dd6bc592899f5bc93dabf7e"></a><!-- doxytag: member="ach.h::ACH_DEFAULT_FRAME_SIZE" ref="ad10d62183dd6bc592899f5bc93dabf7e" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ACH_DEFAULT_FRAME_SIZE</b>&nbsp;&nbsp;&nbsp;512</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a37a6ca5cbf68c6e7f8f4abd5ce783ddc"></a><!-- doxytag: member="ach.h::ach_status_t" ref="a37a6ca5cbf68c6e7f8f4abd5ce783ddc" args="" -->
typedef enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a37a6ca5cbf68c6e7f8f4abd5ce783ddc">ach_status_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return status codes for ach functions <br/></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> { <br/>
&nbsp;&nbsp;<a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551afefe1a7f013444d4d3eeff6a47f1874e">ACH_OK</a> =  0, 
<a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551a1af1e6af38bf18218a80b06195769062">ACH_OVERFLOW</a> =  1, 
<a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551a136cba32d00e1e1065b31703bbf51f5a">ACH_INVALID_NAME</a> =  2, 
<a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551a268e9e8e27c0d5f83ac4eb44369b772a">ACH_BAD_SHM_FILE</a> =  3, 
<br/>
&nbsp;&nbsp;<a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551a07c7b309136d251e83cab6c9647b634b">ACH_FAILED_SYSCALL</a> =  4, 
<a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551a33c60b8c61f290af044ae15970ff0495">ACH_STALE_FRAMES</a> =  5, 
<a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551ab225cc19cdc5defd7f2cc034dd1308db">ACH_MISSED_FRAME</a> =  6, 
<a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551a6403ef3ca27827f131e232e624ada43f">ACH_TIMEOUT</a> =  7, 
<br/>
&nbsp;&nbsp;<a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551a50ab3aceb9e90eab0abcb771fcbff28f">ACH_EEXIST</a> =  8, 
<a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551a26094dd35827f5eeff52ac042adee837">ACH_ENOENT</a> =  9, 
<b>ACH_CLOSED</b> =  10, 
<b>ACH_BUG</b> =  11, 
<br/>
&nbsp;&nbsp;<b>ACH_EINVAL</b> =  12, 
<b>ACH_CORRUPT</b> =  13
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>return status codes for ach functions </p>
 <a href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#ae42d0299e86224c0ac39dc58959bd7fe">ach_get_opts_t</a> { <a class="el" href="ach_8h.html#ae42d0299e86224c0ac39dc58959bd7fea84945ef892a7ea70b1c28734957b9885">ACH_O_WAIT</a> =  0x01, 
<a class="el" href="ach_8h.html#ae42d0299e86224c0ac39dc58959bd7fea42b2241346389ea6f63b685b19346d74">ACH_O_LAST</a> =  0x02, 
<b>ACH_O_COPY</b> =  0x04
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Option flags for <a class="el" href="ach_8h.html#aee074eb5c6f1bb0256194b43f7164386" title="Pulls a message from the channel.">ach_get()</a>. </p>
 <a href="ach_8h.html#ae42d0299e86224c0ac39dc58959bd7fe">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a860d84dfee4d1306fe58df7b073c440a">ach_attr_init</a> (<a class="el" href="structach__attr__t.html">ach_attr_t</a> *attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize attributes for opening channels.  <a href="#a860d84dfee4d1306fe58df7b073c440a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a1fa91ef1ccb0e3521a8b1d6ecfd2a66c">ach_create_attr_init</a> (<a class="el" href="structach__create__attr__t.html">ach_create_attr_t</a> *attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize attributes for creating channels.  <a href="#a1fa91ef1ccb0e3521a8b1d6ecfd2a66c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#afd2a92b13a96dc80bb4ce70b68c36e82">ach_create</a> (const char *channel_name, size_t frame_cnt, size_t frame_size, <a class="el" href="structach__create__attr__t.html">ach_create_attr_t</a> *attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new channel.  <a href="#afd2a92b13a96dc80bb4ce70b68c36e82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa61413f11032605e3dc46d0fb9a52c9"></a><!-- doxytag: member="ach.h::ach_open" ref="aaa61413f11032605e3dc46d0fb9a52c9" args="(ach_channel_t *chan, const char *channel_name, ach_attr_t *attr)" -->
enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#aaa61413f11032605e3dc46d0fb9a52c9">ach_open</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, const char *channel_name, <a class="el" href="structach__attr__t.html">ach_attr_t</a> *attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens a handle to channel. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#aee074eb5c6f1bb0256194b43f7164386">ach_get</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, void *buf, size_t size, size_t *frame_size, const struct timespec *ACH_RESTRICT abstime, int options)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pulls a message from the channel.  <a href="#aee074eb5c6f1bb0256194b43f7164386"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#acb8fcfaba91a22e295a5e437cd5b9c9b">ach_put</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, void *buf, size_t len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Writes a new message in the channel.  <a href="#acb8fcfaba91a22e295a5e437cd5b9c9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#af51fdf3b5edf39ce54f62ac0f031dd2b">ach_flush</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Discards all previously received messages for this handle.  <a href="#af51fdf3b5edf39ce54f62ac0f031dd2b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a397913b30e59cd6c1ab0b9cf8c5b331c">ach_close</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Closes the shared memory block.  <a href="#a397913b30e59cd6c1ab0b9cf8c5b331c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a11e481d90a14ba4485d3bb15a8bb77c3"></a><!-- doxytag: member="ach.h::ach_result_to_string" ref="a11e481d90a14ba4485d3bb15a8bb77c3" args="(ach_status_t result)" -->
const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a11e481d90a14ba4485d3bb15a8bb77c3">ach_result_to_string</a> (<a class="el" href="ach_8h.html#a37a6ca5cbf68c6e7f8f4abd5ce783ddc">ach_status_t</a> result)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Converts return code from ach call to a human readable string;. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#adccdafda2936a9f70087f950ba7e83e8">ach_dump</a> (<a class="el" href="structach__header__t.html">ach_header_t</a> *shm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prints information about the channel shm to stderr.  <a href="#adccdafda2936a9f70087f950ba7e83e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab81866aaeb3995e12e12de27457e1635"></a><!-- doxytag: member="ach.h::ach_chmod" ref="ab81866aaeb3995e12e12de27457e1635" args="(ach_channel_t *chan, mode_t mode)" -->
enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#ab81866aaeb3995e12e12de27457e1635">ach_chmod</a> (<a class="el" href="structach__channel__t.html">ach_channel_t</a> *chan, mode_t mode)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets permissions of chan to specified mode. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3ca9384476568e624155fd7f17aa16f6"></a><!-- doxytag: member="ach.h::ach_unlink" ref="a3ca9384476568e624155fd7f17aa16f6" args="(const char *name)" -->
enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a3ca9384476568e624155fd7f17aa16f6">ach_unlink</a> (const char *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete an ach channel. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structach__pipe__frame__t.html">ach_pipe_frame_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a401609c85440cb0b3d5a8f862b1436ce">ach_pipe_alloc</a> (size_t size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Malloc an <a class="el" href="structach__pipe__frame__t.html" title="Format for ach frames sent over pipes or stored on disk.">ach_pipe_frame_t</a> with room for `size' data bytes.  <a href="#a401609c85440cb0b3d5a8f862b1436ce"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a43db63c13e365879b6f345dadd606a56">ach_pipe_set_size</a> (<a class="el" href="structach__pipe__frame__t.html">ach_pipe_frame_t</a> *frame, uint64_t size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set size field in ach frame, always little endian.  <a href="#a43db63c13e365879b6f345dadd606a56"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a22a869cc3211869668fc530c875630ee">ach_pipe_get_size</a> (const <a class="el" href="structach__pipe__frame__t.html">ach_pipe_frame_t</a> *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set size field in ach frame, always little endian.  <a href="#a22a869cc3211869668fc530c875630ee"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab49bf40d8d514cd9c90044b570b6dbca"></a><!-- doxytag: member="ach.h::ach_channel_size" ref="ab49bf40d8d514cd9c90044b570b6dbca" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#ab49bf40d8d514cd9c90044b570b6dbca">ach_channel_size</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of <a class="el" href="structach__channel__t.html" title="Descriptor for shared memory area.">ach_channel_t</a>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7bdba00f25de2f8ac2887056d0a34154"></a><!-- doxytag: member="ach.h::ach_attr_size" ref="a7bdba00f25de2f8ac2887056d0a34154" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ach_8h.html#a7bdba00f25de2f8ac2887056d0a34154">ach_attr_size</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of <a class="el" href="structach__attr__t.html" title="Attributes to pass to ach_open.">ach_attr_t</a>. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="author"><dt><b>Author:</b></dt><dd>Neil T. Dantam</dd></dl>
<p>Moral Support: Jon Scholz, Pushkar Kolhe, Jon Olson, Venkata Subramania Mahalingam </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ae81e27183c5ad6111cf19685f942ab7e"></a><!-- doxytag: member="ach.h::ACH_SHM_GUARD_DATA_NUM" ref="ae81e27183c5ad6111cf19685f942ab7e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACH_SHM_GUARD_DATA_NUM&nbsp;&nbsp;&nbsp;((uint64_t)0x1C2C3C4C5C6C7C8CLLU)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A separator between different shm sections. </p>
<p>This one comes after the data section (at the very end of the file). Should aid debugging by showing we don't overstep and bounds. 64-bit for alignment. </p>

</div>
</div>
<a class="anchor" id="a4c1ae385acbd87b06971e19753462423"></a><!-- doxytag: member="ach.h::ACH_SHM_GUARD_HEADER_NUM" ref="a4c1ae385acbd87b06971e19753462423" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACH_SHM_GUARD_HEADER_NUM&nbsp;&nbsp;&nbsp;((uint64_t)0x1A2A3A4A5A6A7A8ALLU)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A separator between different shm sections. </p>
<p>This one comes after the header. Should aid debugging by showing we don't overstep and bounds. 64-bit for alignment. </p>

</div>
</div>
<a class="anchor" id="a9756b6b93b39fbed2645e463dfc7d327"></a><!-- doxytag: member="ach.h::ACH_SHM_GUARD_INDEX_NUM" ref="a9756b6b93b39fbed2645e463dfc7d327" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACH_SHM_GUARD_INDEX_NUM&nbsp;&nbsp;&nbsp;((uint64_t)0x1B2B3B4B5B6B7B8BLLU)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A separator between different shm sections. </p>
<p>This ones comes after the index array. Should aid debugging by showing we don't overstep and bounds. 64-bit for alignment. </p>

</div>
</div>
<a class="anchor" id="a6ee6cd8dede61e5c4413a70317f63731"></a><!-- doxytag: member="ach.h::ACH_SHM_MAGIC_NUM" ref="a6ee6cd8dede61e5c4413a70317f63731" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACH_SHM_MAGIC_NUM&nbsp;&nbsp;&nbsp;0xb07511f3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>magic number that appears the the beginning of our mmaped files. </p>
<p>This is just to be used as a check. </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ae42d0299e86224c0ac39dc58959bd7fe"></a><!-- doxytag: member="ach.h::ach_get_opts_t" ref="ae42d0299e86224c0ac39dc58959bd7fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#ae42d0299e86224c0ac39dc58959bd7fe">ach_get_opts_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Option flags for <a class="el" href="ach_8h.html#aee074eb5c6f1bb0256194b43f7164386" title="Pulls a message from the channel.">ach_get()</a>. </p>
<p>Default behavior is to retrieve the oldest unseen frame without waiting. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ae42d0299e86224c0ac39dc58959bd7fea84945ef892a7ea70b1c28734957b9885"></a><!-- doxytag: member="ACH_O_WAIT" ref="ae42d0299e86224c0ac39dc58959bd7fea84945ef892a7ea70b1c28734957b9885" args="" -->ACH_O_WAIT</em>&nbsp;</td><td>
<p>Blocks until an unseen message arrives or timeout. </p>
<p>If the channel already has data that this subscriber has not seen, <a class="el" href="ach_8h.html#aee074eb5c6f1bb0256194b43f7164386" title="Pulls a message from the channel.">ach_get()</a> immediately copies the new data. Otherwise, it waits for some other process or thread to put data into the channel. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae42d0299e86224c0ac39dc58959bd7fea42b2241346389ea6f63b685b19346d74"></a><!-- doxytag: member="ACH_O_LAST" ref="ae42d0299e86224c0ac39dc58959bd7fea42b2241346389ea6f63b685b19346d74" args="" -->ACH_O_LAST</em>&nbsp;</td><td>
<p>Reads the newest message out of the channel. </p>
<p>If the channel contains multiple messages that this subscriber has not seen, <a class="el" href="ach_8h.html#aee074eb5c6f1bb0256194b43f7164386" title="Pulls a message from the channel.">ach_get()</a> will return the newest of these messages. The subscriber will skip past all older messages. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<a class="anchor" id="a0b989f189bcea60548c3692b10eda551"></a><!-- doxytag: member="ach.h::ach_status" ref="a0b989f189bcea60548c3692b10eda551" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return status codes for ach functions </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a0b989f189bcea60548c3692b10eda551afefe1a7f013444d4d3eeff6a47f1874e"></a><!-- doxytag: member="ACH_OK" ref="a0b989f189bcea60548c3692b10eda551afefe1a7f013444d4d3eeff6a47f1874e" args="" -->ACH_OK</em>&nbsp;</td><td>
<p>Call successful. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0b989f189bcea60548c3692b10eda551a1af1e6af38bf18218a80b06195769062"></a><!-- doxytag: member="ACH_OVERFLOW" ref="a0b989f189bcea60548c3692b10eda551a1af1e6af38bf18218a80b06195769062" args="" -->ACH_OVERFLOW</em>&nbsp;</td><td>
<p>buffer to small to hold frame </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0b989f189bcea60548c3692b10eda551a136cba32d00e1e1065b31703bbf51f5a"></a><!-- doxytag: member="ACH_INVALID_NAME" ref="a0b989f189bcea60548c3692b10eda551a136cba32d00e1e1065b31703bbf51f5a" args="" -->ACH_INVALID_NAME</em>&nbsp;</td><td>
<p>invalid channel name </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0b989f189bcea60548c3692b10eda551a268e9e8e27c0d5f83ac4eb44369b772a"></a><!-- doxytag: member="ACH_BAD_SHM_FILE" ref="a0b989f189bcea60548c3692b10eda551a268e9e8e27c0d5f83ac4eb44369b772a" args="" -->ACH_BAD_SHM_FILE</em>&nbsp;</td><td>
<p>shared memory file didn't look right </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0b989f189bcea60548c3692b10eda551a07c7b309136d251e83cab6c9647b634b"></a><!-- doxytag: member="ACH_FAILED_SYSCALL" ref="a0b989f189bcea60548c3692b10eda551a07c7b309136d251e83cab6c9647b634b" args="" -->ACH_FAILED_SYSCALL</em>&nbsp;</td><td>
<p>a system call failed </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0b989f189bcea60548c3692b10eda551a33c60b8c61f290af044ae15970ff0495"></a><!-- doxytag: member="ACH_STALE_FRAMES" ref="a0b989f189bcea60548c3692b10eda551a33c60b8c61f290af044ae15970ff0495" args="" -->ACH_STALE_FRAMES</em>&nbsp;</td><td>
<p>no new data in the channel </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0b989f189bcea60548c3692b10eda551ab225cc19cdc5defd7f2cc034dd1308db"></a><!-- doxytag: member="ACH_MISSED_FRAME" ref="a0b989f189bcea60548c3692b10eda551ab225cc19cdc5defd7f2cc034dd1308db" args="" -->ACH_MISSED_FRAME</em>&nbsp;</td><td>
<p>we missed the next frame </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0b989f189bcea60548c3692b10eda551a6403ef3ca27827f131e232e624ada43f"></a><!-- doxytag: member="ACH_TIMEOUT" ref="a0b989f189bcea60548c3692b10eda551a6403ef3ca27827f131e232e624ada43f" args="" -->ACH_TIMEOUT</em>&nbsp;</td><td>
<p>timeout before frame received </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0b989f189bcea60548c3692b10eda551a50ab3aceb9e90eab0abcb771fcbff28f"></a><!-- doxytag: member="ACH_EEXIST" ref="a0b989f189bcea60548c3692b10eda551a50ab3aceb9e90eab0abcb771fcbff28f" args="" -->ACH_EEXIST</em>&nbsp;</td><td>
<p>shm already exists </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0b989f189bcea60548c3692b10eda551a26094dd35827f5eeff52ac042adee837"></a><!-- doxytag: member="ACH_ENOENT" ref="a0b989f189bcea60548c3692b10eda551a26094dd35827f5eeff52ac042adee837" args="" -->ACH_ENOENT</em>&nbsp;</td><td>
<p>shm doesn't </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a860d84dfee4d1306fe58df7b073c440a"></a><!-- doxytag: member="ach.h::ach_attr_init" ref="a860d84dfee4d1306fe58df7b073c440a" args="(ach_attr_t *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ach_attr_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__attr__t.html">ach_attr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize attributes for opening channels. </p>

</div>
</div>
<a class="anchor" id="a397913b30e59cd6c1ab0b9cf8c5b331c"></a><!-- doxytag: member="ach.h::ach_close" ref="a397913b30e59cd6c1ab0b9cf8c5b331c" args="(ach_channel_t *chan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__channel__t.html">ach_channel_t</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Closes the shared memory block. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>chan is an initialized ach channel with open shared memory area</dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>the shared memory file for chan is closed </dd></dl>

</div>
</div>
<a class="anchor" id="afd2a92b13a96dc80bb4ce70b68c36e82"></a><!-- doxytag: member="ach.h::ach_create" ref="afd2a92b13a96dc80bb4ce70b68c36e82" args="(const char *channel_name, size_t frame_cnt, size_t frame_size, ach_create_attr_t *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_create </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>frame_cnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>frame_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structach__create__attr__t.html">ach_create_attr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new channel. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>channel_name</em>&nbsp;</td><td>Name of the channel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>frame_cnt</em>&nbsp;</td><td>number of frames to hold in circular buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>frame_size</em>&nbsp;</td><td>nominal size of each frame </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>attr</em>&nbsp;</td><td>options </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1fa91ef1ccb0e3521a8b1d6ecfd2a66c"></a><!-- doxytag: member="ach.h::ach_create_attr_init" ref="a1fa91ef1ccb0e3521a8b1d6ecfd2a66c" args="(ach_create_attr_t *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ach_create_attr_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__create__attr__t.html">ach_create_attr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize attributes for creating channels. </p>

</div>
</div>
<a class="anchor" id="adccdafda2936a9f70087f950ba7e83e8"></a><!-- doxytag: member="ach.h::ach_dump" ref="adccdafda2936a9f70087f950ba7e83e8" args="(ach_header_t *shm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ach_dump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__header__t.html">ach_header_t</a> *&nbsp;</td>
          <td class="paramname"> <em>shm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints information about the channel shm to stderr. </p>
<p>This function is mostly for internal debugging. </p>

</div>
</div>
<a class="anchor" id="af51fdf3b5edf39ce54f62ac0f031dd2b"></a><!-- doxytag: member="ach.h::ach_flush" ref="af51fdf3b5edf39ce54f62ac0f031dd2b" args="(ach_channel_t *chan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__channel__t.html">ach_channel_t</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Discards all previously received messages for this handle. </p>
<p>Does not change the actual channel, just resets the sequence number in the handle. </p>

</div>
</div>
<a class="anchor" id="aee074eb5c6f1bb0256194b43f7164386"></a><!-- doxytag: member="ach.h::ach_get" ref="aee074eb5c6f1bb0256194b43f7164386" args="(ach_channel_t *chan, void *buf, size_t size, size_t *frame_size, const struct timespec *ACH_RESTRICT abstime, int options)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__channel__t.html">ach_channel_t</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>frame_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timespec *ACH_RESTRICT&nbsp;</td>
          <td class="paramname"> <em>abstime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>options</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pulls a message from the channel. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>chan has been opened with <a class="el" href="ach_8h.html#aaa61413f11032605e3dc46d0fb9a52c9" title="Opens a handle to channel.">ach_open()</a></dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>If buf is big enough to hold the next frame, buf contains the data for the last frame and chan.seq_num is set to the last frame. If buf is too small to hold the next frame, no side effects occur. The seq_num field of chan will be set to the latest sequence number (that of the gotten frame).</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>The previously opened channel handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>Buffer to store data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Length of buffer in bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>frame_size</em>&nbsp;</td><td>The number of bytes copied to buf, or the size of the desired frame if buf is too small. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>abstime</em>&nbsp;</td><td>An absolute timeout if ACH_O_WAIT is specified. Take care that abstime is given in the correct clock. The default is CLOCK_MONOTONIC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>Option flags </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a401609c85440cb0b3d5a8f862b1436ce"></a><!-- doxytag: member="ach.h::ach_pipe_alloc" ref="a401609c85440cb0b3d5a8f862b1436ce" args="(size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structach__pipe__frame__t.html">ach_pipe_frame_t</a>* ach_pipe_alloc </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Malloc an <a class="el" href="structach__pipe__frame__t.html" title="Format for ach frames sent over pipes or stored on disk.">ach_pipe_frame_t</a> with room for `size' data bytes. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>a newly allocated ach_pipe_frame with its magic and size fields properly filled. Size is big endian.. </dd></dl>

</div>
</div>
<a class="anchor" id="a22a869cc3211869668fc530c875630ee"></a><!-- doxytag: member="ach.h::ach_pipe_get_size" ref="a22a869cc3211869668fc530c875630ee" args="(const ach_pipe_frame_t *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t ach_pipe_get_size </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structach__pipe__frame__t.html">ach_pipe_frame_t</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set size field in ach frame, always little endian. </p>

</div>
</div>
<a class="anchor" id="a43db63c13e365879b6f345dadd606a56"></a><!-- doxytag: member="ach.h::ach_pipe_set_size" ref="a43db63c13e365879b6f345dadd606a56" args="(ach_pipe_frame_t *frame, uint64_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ach_pipe_set_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__pipe__frame__t.html">ach_pipe_frame_t</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set size field in ach frame, always little endian. </p>

</div>
</div>
<a class="anchor" id="acb8fcfaba91a22e295a5e437cd5b9c9b"></a><!-- doxytag: member="ach.h::ach_put" ref="acb8fcfaba91a22e295a5e437cd5b9c9b" args="(ach_channel_t *chan, void *buf, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ach_8h.html#a0b989f189bcea60548c3692b10eda551">ach_status</a> ach_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structach__channel__t.html">ach_channel_t</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes a new message in the channel. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>chan has been opened with <a class="el" href="ach_8h.html#aaa61413f11032605e3dc46d0fb9a52c9" title="Opens a handle to channel.">ach_open()</a></dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>The contents of buf are copied into the channel and the sequence number of the channel is incremented.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>(action) The channel to write to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>The buffer containing the data to copy into the channel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>number of bytes in buf to copy, len &gt; 0 </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>ACH_OK on success. </dd></dl>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Nov 15 2012 01:27:04 for ach by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
