<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ach: </title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="frame-format"></a>
Frame Format</h2>
<p><code> -----------------------------------<br/>
 | "size" | int32 | "data" | $DATA |<br/>
 -----------------------------------<br/>
 </code></p>
<p>Ach frames are sent across the pipe as the four ascii bytes "size", a big-endian 32-bit integer indicating the size in bytes of the frame, the four ascii bytes "data", and the proper number of data bytes.</p>
<h2><a class="anchor" id="simple-mode"></a>
Simple Mode</h2>
<p>A subscribing achpipe process will push frames across the pipe as soon as they appear in the channel. A publishing achpipe process will read a frame from the pipe and the put it on the channel.</p>
<h2><a class="anchor" id="sync-mode"></a>
Synchronous Mode</h2>
<p>Subscribing achpipe processes can operate in synchronous mode. In this case, the process will read a command from the pipe and then perform an action based on that command. Current commands are:</p>
<ul>
<li>
<code>next</code> Send the next frame from channel. <dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ach_8c.html#ac8ae7ed660eacc104755d3de9ddb60b6" title="like ach_get_next but blocks if no new data is there">ach_wait_next</a>  </dd></dl>
</li>
<li>
<code>last</code> Send the last frame from channel. <dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ach_8c.html#a79118c8d91f1b014274099004fcb46e8" title="Blocks until a new message is available.">ach_wait_last</a>  </dd></dl>
</li>
</ul>
<p>These commands are sent as four ascii bytes, no '\n' and no '\0', just like the aforementioned "size" and "data" delimiters. If future commands need arguments, it may be best in increase the length of all commands to 8 bytes so that a command can be obtained with a single read(). That would avoid the additional system call without having to resort to userspace buffering.</p>
<h2><a class="anchor" id="comparison-proper"></a>
Comparison to Ach Proper</h2>
<p>Note that ach normally communicates using shared memory. The pipe protocol is only for intermachine communication or increasing robustness if one does not want a process to touch shared memory directly.</p>
<dl class="see"><dt><b>See also:</b></dt><dd>Todo List </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Aug 26 2012 17:54:07 for ach by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
